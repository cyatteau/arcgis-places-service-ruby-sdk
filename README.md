# openapi_client

OpenapiClient - the Ruby gem for the ArcGIS places service

# ArcGIS places service

The places service can search for businesses, points of interest (POI), and
popular geographic features near a location or within a bounding box.

You can use the service to:

* Find and display places on a map. 
* Search for places by text and/or
categories such as restaurants, gas stations, or schools. 
* Find places near
a location and display information such as place name, description, address,
user ratings, store hours, and contact information. 
* Find places within a
bounding box (extent). 
* Search for over 1,000 categories using the API or the [category
browser](https://developers.arcgis.com/documentation/mapping-apis-and-services/places/places-category-finder/). 

**Additional documentation**: To access the service with different client
APIs, go to
[Places](https://developers.arcgis.com/documentation/mapping-apis-and-services/places/)
in the _Mapping APIs and location services_ guide.

## Supported Operations

### /categories

The `places/categories` endpoint returns the full list of categories
supported by the service. There are over 1000 categories organized into a
hierarchy. For example, a place that is in the category of \"French
Restaurant\", can also be found through the parent category \"Restaurant\", which
is also included in \"Dining and Drinking\". 

If you want to view a specific subset of categories, you can supply a filter
parameter to return a reduced list of categories which match your filter.

### /categories/{categoryId}

The `/categories/{categoryId}` endpoint looks up details of a specific
category using its ID and returns all the categories to which it belongs and
the parent category ID.

### places/near-point

The `places/near-point` endpoint returns places that are within a search
distance of a geographic point. You can also supply additional search
criteria, including:

- Search text, such as the place name, or partial name. 

- The categories of places (for example, coffee shops or
museums).

### places/within-extent

The `places/within-extent` endpoint returns candidate places that are within an
extent (or bounding box). You can also supply additional search
criteria, including:

- Search text, such as the place name, or partial name. 

- The categories of places (for example, coffee shops or
museums).

### places/{placeId}
The `places/{placeId}` endpoint returns detailed information about a given
place, including:

- Contact information.

- Address.

- Opening hours.

- Overall price.

- User rating.

## Workflows

### Local search
In a local search application, follow these steps:

1. Make a `places/categories` request to get information about all available categories.

2. Let users select the categories they want. You will need the category Ids
when searching for places. For example, if the target category is \"Bicycle
Store\", the category Id is `17119`. Note that if you already know the
category Id you are interested in, you can skip steps 1 and 2.

3. Pass the user's search location and a search distance, along with
optional search criteria such as category, to `places/near-point` endpoint.

4. Present the user with the filtered places and let them choose those they
want to see in more detail. You will need the `placeId` to fetch additional
details.

5. Pass the `placeId` to `places/{placeId}` endpoint to get details for a specific place. 

## Units

- Geographic coordinates are in WGS84 decimal degrees, x is a longitude and y is a latitude.
- Distances are in meters.


This SDK is automatically generated by the [OpenAPI Generator](https://openapi-generator.tech) project:

- API version: 1.1.6
- Package version: 1.0.0
- Build package: org.openapitools.codegen.languages.RubyClientCodegen

## Installation

### Build a gem

To build the Ruby code into a gem:

```shell
gem build openapi_client.gemspec
```

Then either install the gem locally:

```shell
gem install ./openapi_client-1.0.0.gem
```

(for development, run `gem install --dev ./openapi_client-1.0.0.gem` to install the development dependencies)

or publish the gem to a gem hosting service, e.g. [RubyGems](https://rubygems.org/).

Finally add this to the Gemfile:

    gem 'openapi_client', '~> 1.0.0'

### Install from Git

If the Ruby gem is hosted at a git repository: https://github.com/GIT_USER_ID/GIT_REPO_ID, then add the following in the Gemfile:

    gem 'openapi_client', :git => 'https://github.com/GIT_USER_ID/GIT_REPO_ID.git'

### Include the Ruby code directly

Include the Ruby code directly using `-I` as follows:

```shell
ruby -Ilib script.rb
```

## Getting Started

Please follow the [installation](#installation) procedure and then run the following code:

```ruby
# Load the gem
require 'openapi_client'

# Setup authorization
OpenapiClient.configure do |config|
  # Configure Bearer authorization (X-Esri-Authorization: Bearer <YOUR_TOKEN>): ArcGISXEsriAuthorizationHeader
  config.access_token = 'YOUR_BEARER_TOKEN'
  # Configure a proc to get access tokens in lieu of the static access_token configuration
  config.access_token_getter = -> { 'YOUR TOKEN GETTER PROC' } 

  # Configure Bearer authorization (Authorization: Bearer <YOUR_TOKEN>): ArcGISAuthorizationHeader
  config.access_token = 'YOUR_BEARER_TOKEN'
  # Configure a proc to get access tokens in lieu of the static access_token configuration
  config.access_token_getter = -> { 'YOUR TOKEN GETTER PROC' } 

  # Configure API key authorization: ArcGISTokenParameter
  config.api_key['ArcGISTokenParameter'] = 'YOUR_API_KEY'
  # Uncomment the following line to set a prefix for the API key, e.g. 'Bearer' (defaults to nil)
  # config.api_key_prefix['ArcGISTokenParameter'] = 'Bearer'
end

api_instance = OpenapiClient::CategoriesApi.new
category_id = '17117' # String | The ID of the category that you want to fetch details for.  For example, using a category ID of `13035` would fetch details about the \"Coffee Shop\" category. 
opts = {
  f: 'json', # String | The requested response format - either `json` or `pjson` (pretty json). 
  token: 'token_example' # String | The authentication token with the `premium:user:places` [privilege](https://developers.arcgis.com/rest/users-groups-and-items/privileges.htm), used to access the Places service.  The `token` parameter can be either an API Key or short-lived token. See [ArcGIS security documentation](https://developers.arcgis.com/documentation/mapping-apis-and-services/security/) for more information on authenticating with a token or API key.  Alternatively, you can supply a token in the request header with one of the following keys using the \"Bearer\" scheme:  - `Authorization: Bearer <YOUR_TOKEN>` - `X-Esri-Authorization: Bearer <YOUR_TOKEN>` 
}

begin
  #Get the category details for a category ID.
  result = api_instance.categories_category_id_get(category_id, opts)
  p result
rescue OpenapiClient::ApiError => e
  puts "Exception when calling CategoriesApi->categories_category_id_get: #{e}"
end

```

## Documentation for API Endpoints

All URIs are relative to *https://places-api.arcgis.com/arcgis/rest/services/places-service/v1*

Class | Method | HTTP request | Description
------------ | ------------- | ------------- | -------------
*OpenapiClient::CategoriesApi* | [**categories_category_id_get**](docs/CategoriesApi.md#categories_category_id_get) | **GET** /categories/{categoryId} | Get the category details for a category ID.
*OpenapiClient::CategoriesApi* | [**categories_get**](docs/CategoriesApi.md#categories_get) | **GET** /categories | Return the name and category ID of all categories, or categories which satisfy a filter.
*OpenapiClient::PlacesApi* | [**near_point_get**](docs/PlacesApi.md#near_point_get) | **GET** /places/near-point | Search for places near a point or location by radius.
*OpenapiClient::PlacesApi* | [**place_id_get**](docs/PlacesApi.md#place_id_get) | **GET** /places/{placeId} | Get place details including name, address, description, and other attributes.
*OpenapiClient::PlacesApi* | [**within_extent_get**](docs/PlacesApi.md#within_extent_get) | **GET** /places/within-extent | Search for places within an extent (bounding box).


## Documentation for Models

 - [OpenapiClient::AdditionalLocations](docs/AdditionalLocations.md)
 - [OpenapiClient::Address](docs/Address.md)
 - [OpenapiClient::CategoriesGet200Response](docs/CategoriesGet200Response.md)
 - [OpenapiClient::Category](docs/Category.md)
 - [OpenapiClient::CategoryDetails](docs/CategoryDetails.md)
 - [OpenapiClient::ChainInfo](docs/ChainInfo.md)
 - [OpenapiClient::ContactInfo](docs/ContactInfo.md)
 - [OpenapiClient::Error](docs/Error.md)
 - [OpenapiClient::ErrorError](docs/ErrorError.md)
 - [OpenapiClient::Hours](docs/Hours.md)
 - [OpenapiClient::HoursByDay](docs/HoursByDay.md)
 - [OpenapiClient::NearPointGet200Response](docs/NearPointGet200Response.md)
 - [OpenapiClient::NearPointResult](docs/NearPointResult.md)
 - [OpenapiClient::NullablePoint](docs/NullablePoint.md)
 - [OpenapiClient::Pagination](docs/Pagination.md)
 - [OpenapiClient::PlaceDetails](docs/PlaceDetails.md)
 - [OpenapiClient::PlaceIdGet200Response](docs/PlaceIdGet200Response.md)
 - [OpenapiClient::Point](docs/Point.md)
 - [OpenapiClient::Rating](docs/Rating.md)
 - [OpenapiClient::SocialMedia](docs/SocialMedia.md)
 - [OpenapiClient::TimeRange](docs/TimeRange.md)
 - [OpenapiClient::WithinExtentGet200Response](docs/WithinExtentGet200Response.md)
 - [OpenapiClient::WithinExtentResult](docs/WithinExtentResult.md)


## Documentation for Authorization


Authentication schemes defined for the API:
### ArcGISTokenParameter


- **Type**: API key
- **API key parameter name**: token
- **Location**: URL query string

### ArcGISAuthorizationHeader

- **Type**: Bearer authentication (Authorization: Bearer <YOUR_TOKEN>)

### ArcGISXEsriAuthorizationHeader

- **Type**: Bearer authentication (X-Esri-Authorization: Bearer <YOUR_TOKEN>)

